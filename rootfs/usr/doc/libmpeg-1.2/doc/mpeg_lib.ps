%!PS-Adobe-2.0
%%Creator: dvipsk 5.58f Copyright 1986, 1994 Radical Eye Software
%%Title: mpeg_lib.dvi
%%Pages: 8
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Palatino-Roman Courier Palatino-Bold Palatino-Italic
%%+ Courier-Bold
%%EndComments
%DVIPSCommandLine: dvips mpeg_lib
%DVIPSParameters: dpi=600, compressed, comments removed
%DVIPSSource:  TeX output 1995.06.21:1935
%%BeginProcSet: texc.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]/id ch-image N /rw ch-width 7 add 8 idiv string N /rc 0 N /gp 0 N
/cp 0 N{rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}imagemask restore}B /G{{id
gp get /gp gp 1 add N dup 18 mod S 18 idiv pl S get exec}loop}B /adv{cp
add /cp X}B /chg{rw cp id gp 4 index getinterval putinterval dup gp add
/gp X adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get dup 0 eq{pop 1}{
dup 255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}ifelse put 1
adv}B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}{dup 2
idiv S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval
adv}B /fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}
{adv 1 chg nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{
adv rsh nd}{1 add adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2
chg nd}{pop nd}]dup{bind pop}forall N /D{/cc X dup type /stringtype ne{]
}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
%%BeginProcSet: special.pro
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N
/vs 792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen
false N /rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B
/@scaleunit 100 N /@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit
div /vsc X}B /@hsize{/hs X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{
/CLIP 2 N}B /@hoffset{/ho X}B /@voffset{/vo X}B /@angle{/ang X}B /@rwi{
10 div /rwi X /rwiSeen true N}B /@rhi{10 div /rhi X /rhiSeen true N}B
/@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B /@ury{/ury X}B /magscale
true def end /@MacSetUp{userdict /md known{userdict /md get type
/dicttype eq{userdict begin md length 10 add md maxlength ge{/md md dup
length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{}
N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath
clippath mark{transform{itransform moveto}}{transform{itransform lineto}
}{6 -2 roll transform 6 -2 roll transform 6 -2 roll transform{
itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll curveto}}{{
closepath}}pathforall newpath counttomark array astore /gc xdf pop ct 39
0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}if}N
/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1 -1
scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3 get
ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip yflip
not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub neg 0
TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{noflips{TR
pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop 90 rotate 1
-1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg
TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get neg
sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr
0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add
2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp
{pop pop showpage pm restore}N end}if}if}N /normalscale{Resolution 72
div VResolution 72 div neg scale magscale{DVImag dup scale}if 0 setgray}
N /psfts{S 65781.76 div N}N /startTexFig{/psf$SavedState save N userdict
maxlength dict begin /magscale true def normalscale currentpoint TR
/psf$ury psfts /psf$urx psfts /psf$lly psfts /psf$llx psfts /psf$y psfts
/psf$x psfts currentpoint /psf$cy X /psf$cx X /psf$sx psf$x psf$urx
psf$llx sub div N /psf$sy psf$y psf$ury psf$lly sub div N psf$sx psf$sy
scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub TR
/showpage{}N /erasepage{}N /copypage{}N /p 3 def @MacSetUp}N /doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{SDict
begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial
{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if /showpage{}N /erasepage{}N /copypage{}N newpath
}N /@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{
end}repeat grestore SpecialSave restore end}N /@defspecial{SDict begin}
N /@fedspecial{end}B /li{lineto}B /rl{rlineto}B /rc{rcurveto}B /np{
/SaveX currentpoint /SaveY X N 1 setlinecap newpath}N /st{stroke SaveX
SaveY moveto}N /fil{fill SaveX SaveY moveto}N /ellipse{/endangle X
/startangle X /yrad X /xrad X /savematrix matrix currentmatrix N TR xrad
yrad scale 0 0 1 startangle endangle arc savematrix setmatrix}N end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (mpeg_lib.dvi)
@start /Fa 1 79 df<49B56C49B512F81BF0A290C76D9039000FFE004AEE03F0705D73
5A03DF150302037F038F5E82190791380787FC030793C7FC1503705C140F91260E01FF14
0EA26F151E021E80021C017F141C83193C023C6D7E02381638161F711378147802706D6C
1370A2040714F002F0804A01035C8318010101EC01FF4A5E82188313034A91387FC380A2
EF3FC7010716E791C8001F90C8FC18F718FF4981010E5E1707A2131E011C6F5AA2013C15
01137C01FE6F5AEA03FFB512FC187818704D3E7DBD49>78 D E /Fb
134[51 3[56 30 40 35 1[56 51 56 81 3[30 1[51 1[45 1[40
20[76 7[51 4[71 6[23 58[{}17 91.249977 /Palatino-Bold
rf /Fc 136[60 2[60 60 60 1[60 60 60 60 3[60 1[60 1[60
60 60 1[60 13[60 60 1[60 60 1[60 3[60 1[60 60 60 60 26[60
60 40[{}26 100.000000 /Courier-Bold rf /Fd 3 57 df<EB01FE90380FFFC09038
3F03F090387C00F849137C48487F48487F4848EB0F80A2000F15C04848EB07E0A3003F15
F0A290C712034815F8A64815FCB3A26C15F8A56C6CEB07F0A3001F15E0A36C6CEB0FC0A2
6C6CEB1F80000315006C6C133E6C6C5B017C5B90383F03F090380FFFC0D901FEC7FC263F
7DBC2D>48 D<EB01C013031307131F137FEA07FFB5FC139FEAF81F1200B3B3ACEB7FF0B6
12F8A31D3D78BC2D>I<EB03FC90381FFF8090387C07E09038F001F83901E0007C48487F
48487F48C7FCED0F80121E16C0003E1407A4123FA26DEB0F807F6C6C131F6D140001FC13
3E6C6C5B9038FF80786C6D5A6CEBF3E06CEBFF806C91C7FC133F6D13C06D7F013F13F801
787F48486C7E3903E01FFF48486C1380260F800313C048487E489038007FE0003E143F00
7E141F007CEC0FF01507481403A31501A46C15E0007C1403A2007E15C06C14076CEC0F80
6DEB1F006C6C133ED807F05B3901FC03F86CB512E0011F1380D903FCC7FC243F7CBC2D>
56 D E /Fe 138[61 33 44 39 1[61 55 61 89 33 2[33 61 55
39 50 61 44 1[50 12[66 10[39 4[83 72 13[50 50 50 50 50
2[25 46[{}27 100.000000 /Palatino-Bold rf /Ff 134[45
3[45 45 45 2[45 1[45 45 45 2[45 1[45 45 45 1[45 45 45
38[45 10[45 45 46[{}18 75.000000 /Courier rf /Fg 134[42
39 62 42 45 24 32 30 1[45 41 43 66 22 42 1[22 43 42 25
36 46 33 41 37 12[46 3[45 2[71 46 4[57 42 46 9[19 12[19
25 19 2[25 25 40[{}36 75.000000 /Palatino-Roman rf /Fh
2 51 df<13E01201120712FF12F91201B3A7487EB512C0A212217AA01E>49
D<EA01FC3807FF80381C0FC0383003E0386001F0EB00F812F86C13FCA2147C1278003013
FCC7FC14F8A2EB01F0EB03E014C0EB0780EB0F00131E13385B5B3801C00CEA0380380600
185A5A383FFFF85AB512F0A216217CA01E>I E /Fi 138[51 30
35 35 2[40 51 71 25 2[25 45 45 25 35 45 37 42 40 19[86
9[61 1[66 7[45 5[45 5[30 5[25 39[{}24 91.249977 /Palatino-Italic
rf /Fj 3 16 df<007FB812FEBAFCA26C17FE3804799847>0 D<0060166000F816F06C15
01007E15036CED07E06C6CEC0FC06C6CEC1F806C6CEC3F006C6C147E6C6C5C6C6C495A01
7E495A6D495A6D6C485A6D6C485A6D6C48C7FC903803F07E6D6C5A903800FDF8EC7FF06E
5A6E5AA24A7E4A7EECFDF8903801F8FC903803F07E49487E49486C7E49486C7E49486C7E
017E6D7E496D7E48486D7E4848147E4848804848EC1F804848EC0FC048C8EA07E0007EED
03F0481501481500006016602C2C73AC47>2 D<EB0FFCEB3FFF90B512C0000314F04880
488048804880A2481580A3B712C0AA6C1580A36C1500A26C5C6C5C6C5C6C5CC614C0013F
90C7FCEB0FFC22227BA72D>15 D E /Fk 2 51 df<130C133C137CEA03FC12FFEAFC7C12
00B3B113FE387FFFFEA2172C7AAB23>49 D<EB7F803801FFF0380780FC380E003F48EB1F
8048EB0FC05A0060EB07E012F000FC14F07E1403A3007C1307C7FCA215E0140F15C0141F
1580EC3F00147E147C5C495A495A495A495A011EC7FC5B5B4913305B485A4848136048C7
FC000E14E0001FB5FC5A4814C0B6FCA21C2C7DAB23>I E /Fl 130[55
1[55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 2[55
55 55 55 55 55 55 55 55 1[55 1[55 1[55 1[55 1[55 55 55
55 55 55 1[55 55 55 55 55 2[55 55 55 55 55 55 55 55 55
1[55 55 55 55 55 55 1[55 3[55 1[55 55 55 55 55 55 55
55 55 55 55 1[55 2[55 55 55 33[{}73 91.249977 /Courier
rf /Fm 47[91 21[45 8[45 2[55 3[45 47[45 51 47 76 51 55
30 39 36 51 55 50 53 80 26 51 21 26 53 51 30 44 56 40
50 45 3[30 1[30 1[61 61 91 66 71 56 48 61 71 55 1[76
86 56 66 1[31 76 69 51 56 70 64 56 71 1[40 3[23 23 45
45 45 45 45 45 45 45 45 45 55 23 30 23 2[30 30 25 5[25
33[{}77 91.249977 /Palatino-Roman rf /Fn 134[66 1[100
1[73 40 53 47 1[73 66 73 106 1[73 1[40 73 66 47 60 73
53 73 60 14[86 1[73 2[120 73 2[47 1[100 66 73 100 86
80 13[60 60 60 60 49[{}35 119.999947 /Palatino-Bold rf
/Fo 139[60 1[60 1[60 1[60 60 60 2[60 1[60 1[60 1[60 1[60
32[60 17[60 46[{}13 100.000000 /Courier rf /Fp 138[60
2[39 3[58 6[55 1[48 61 2[50 9[100 12[33 2[76 13[50 3[50
2[50 50 4[25 2[33 33 40[{}17 100.000000 /Palatino-Roman
rf /Fq 134[80 5[61 57 2[78 83 4[42 83 2[69 2[79 72 10[104
1[88 3[87 2[136 88 4[109 1[88 18[72 72 2[36 46[{}20 144.000000
/Palatino-Roman rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 1348 763 a Fq(The)36 b(MPEG)f(Library)1604 946
y(V)-16 b(ersion)35 b(1.2)1710 1198 y Fp(Gr)n(eg)25 b(W)-9
b(ar)n(d)1259 1314 y(\()p Fo(greg@pet.mni.mcgill.ca)p
Fp(\))1664 1518 y(June)25 b(21,)f(1995)0 1871 y Fn(1)119
b(Introduction)30 b(and)g(Background)0 2081 y Fm(The)c(MPEG)g(Library)g
(is)h(based)e(on)h(an)h(ef)n(fort)f(fr)n(om)h(the)f(University)f(of)h
(California)j(at)e(Berkeley)d(to)h(cr)n(eate)i(a)0 2194
y(portable,)e(softwar)n(e-based)g(MPEG)g(decoder)f([2].)39
b(This)25 b(r)n(esulted)f(in)i(the)e(widely)h(distributed)f(\(and)i
(widely)0 2307 y(modi\256ed\))k Fl(mpeg)p 652 2307 28
4 v 31 w(play)p Fm(,)g(a)h(highly-optimized)g(MPEG)f(decoder)f(that)h
(was)g(speci\256cally)i(gear)n(ed)d(towar)n(ds)0 2420
y(displaying)i(under)f(X)h(W)-5 b(indows.)55 b(The)30
b(value)i(of)g(having)g(a)g(portable,)g(softwar)n(e)f(MPEG)g(decoder)f
(is)h(am-)0 2533 y(ply)22 b(demonstrated)e(by)j(the)f(number)g(of)h(pr)
n(ograms)f(that)g(have)h(been)f(adapted)f(fr)n(om)j(this)e(original)h
(Berkeley)0 2646 y(sour)n(ce)g(\(including)h(ports)e(to)h(the)g(Linux)g
(SVGA)g(library)-10 b(,)25 b(Silicon)g(Graphics)f(har)n(dwar)n(e,)g
(and)g(a)g(non-display)0 2759 y(MPEG)30 b(information)g(utility\).)52
b(However)-7 b(,)31 b(the)e(utility)h(of)g(the)f(decoder)f(was)h
(limited)i(by)f(the)f(dif)n(\256culty)h(of)0 2872 y(extracting)21
b(the)f(useful,)h(MPEG-r)n(elated)f(sour)n(ce)h(code)f(fr)n(om)i(the)e
(X1)-5 b(1-speci\256c,)22 b(display-r)n(elated)f(sour)n(ce.)29
b(Es-)0 2985 y(sentially)17 b(what)g(was)f(needed)f(was)i(a)g(simple)g
(interface)g(that)g(would)f(allow)i(a)f(pr)n(ogrammer)f(to)h(extract)f
(frames)0 3098 y(fr)n(om)21 b(an)g(MPEG)g(str)n(eam)f(\(either)g(befor)
n(e)h(or)f(after)g(converting)g(to)g(RGB)h(colour)f(space\),)h(and)g
(then)e(to)h(do)g(with)0 3211 y(the)i(image)h(data)g(as)f(he)h(or)f
(she)g(saw)g(\256t.)141 3324 y(The)k(MPEG)g(Library)g(is)g(intended)f
(to)g(\256ll)i(this)f(need.)39 b(It)26 b(was)g(developed)e(at)i(the)g
(Montr)n(eal)g(Neur)n(ologi-)0 3436 y(cal)i(Institute)c(in)j(the)f
(summer)g(of)h(1994)h(in)f(or)n(der)e(to)h(facilitate)j(the)c
(development)g(of)i(a)g(high-performance,)0 3549 y(featur)n(e-heavy)d
(MPEG)h(player)f(for)h(Silicon)g(Graphics)h(workstations.)33
b(Since)25 b(then,)f(the)f(Library)i(has)g(found)0 3662
y(a)d(use)d(in)j(numer)n(ous)e(applications,)i(notably)e(as)i(one)e(of)
h(several)g(optional)f(libraries)i(used)e(for)h(extending)e(the)0
3775 y(well-known)j(ImageMagick)h(suite)e(of)i(graphics)g
(applications.)0 4067 y Fn(2)119 b(Programming)31 b(with)e(the)h(MPEG)f
(Library)0 4278 y Fm(Using)c(the)h(Library)g(is)g(quite)g
(straightforwar)n(d,)g(and)g(is)g(analogous)g(to)g(the)f(way)h(in)h
(which)f(\256les)g(have)h(been)0 4391 y(traditionally)i(handled:)40
b(you)27 b(open)g(an)h(MPEG)g(str)n(eam)g(to)f(initialize)k(internal)d
(data)g(str)o(uctur)n(es,)g(and)g(then)0 4504 y(r)n(ead)d(frames)f
(until)h(the)f(str)n(eam)h(is)g(exhausted.)34 b(At)24
b(any)h(point,)f(you)g(can)h(r)n(ewind)f(the)g(str)n(eam)h(to)f(start)g
(over;)0 4617 y(however)-7 b(,)22 b(random)i(access)f(is)h(not)e
(allowed.)33 b(\(This)23 b(is)h(not)f(due)f(to)h(a)h(fundamental)g
(weakness)d(with)i(MPEG;)0 4730 y(however)-7 b(,)22 b(due)g(to)h(the)f
(natur)n(e)h(of)g(the)g(decoding)f(engine)g(at)h(the)g(heart)f(of)h
(the)g(MPEG)g(Library)-10 b(,)23 b(don't)f(expect)0 4843
y(to)g(see)f(it)i(implemented)f(her)n(e)g(any)h(time)f(soon.\))29
b(When)23 b(you)e(ar)n(e)i(\256nished)f(with)h(the)f(str)n(eam,)g(you)g
(close)g(it)h(to)0 4956 y(clean)g(up.)141 5068 y(Her)n(e)c(is)h(a)g
(simple)f(example)h(pr)n(ogram)f(to)g(open)g(an)h(MPEG)g(str)n(eam)f
(\(named)h(by)f(the)g(\256rst)g(command-line)0 5181 y(ar)n(gument\))g
(and)f(r)n(ead)h(all)h(frames)f(fr)n(om)h(it.)29 b(Since)19
b(displaying)f(images)h(is)g(as)g(non-portable)f(as)h(it)g(is)g
(desirable,)0 5294 y(I)27 b(have)h(included)g(calls)h(to)e(dummy)g(r)n
(outines)g Fl(InitializeDispl)o(ay)o(\(\))21 b Fm(and)28
b Fl(ShowFrame\(\))p Fm(;)d(actually)0 5407 y(de\256ning)d(these)f(is)h
(up)g(to)g(you.)1927 5656 y(1)p eop
%%Page: 2 2
2 1 bop 0 399 a Fl(#include)51 b(<stdio.h>)0 511 y(#include)g("mpeg.h")
0 737 y(int)i(main)g(\(int)g(argc,)f(char)h(*argv[]\))0
850 y({)164 963 y(FILE)380 b(*mpeg;)164 1076 y(ImageDesc)159
b(img;)164 1189 y(Boolean)269 b(moreframes)50 b(=)k(TRUE;)164
1302 y(char)380 b(*pixels;)164 1528 y(mpeg)52 b(=)i(fopen)f(\(argv[1],)
d("r"\);)164 1641 y(SetMPEGOption)e(\(MPEG_DITHER,)h(FULL_COLOR_DITH)o
(ER)o(\);)164 1753 y(OpenMPEG)i(\(mpeg,)g(&img\);)164
1979 y(InitializeDisp)o(la)o(y)d(\(img.Width,)i(img.Height\);)164
2092 y(pixels)h(=)k(\(char)d(*\))h(malloc)f(\(img.Size\);)164
2205 y(while)g(\(moreframes\))164 2318 y({)327 2431 y(moreframes)e(=)k
(GetMPEGFrame)49 b(\(pixels\);)327 2544 y(DisplayFrame)g(\(img.Width,)h
(img.Height,)f(pixels\))164 2657 y(})164 2770 y(CloseMPEG)h(\(\);)164
2883 y(fclose)h(\(mpeg\);)0 2995 y(})141 3150 y Fm(For)28
b(a)h(concr)n(ete)f(example,)i(you)e(might)h(wish)f(to)g(consult)g
Fl(easympeg.c)p Fm(,)e(a)j(very)f(simple)h(SGI-speci\256c)0
3263 y(MPEG)18 b(player)h(included)f(with)g(the)g(Library)-10
b(.)29 b(Also,)18 b(I)g(have)h(omitted)e(any)i(err)n(or)n(-checking)f
(or)g(handling)h(her)n(e;)0 3376 y(again,)k(consult)f
Fl(easympeg.c)d Fm(for)j(a)h(mor)n(e)g(r)n(ealistic)h(example.)2285
3343 y Fk(1)141 3489 y Fm(Note)d(in)i(particular)h(the)e(following)h
(points)e(about)i(the)f(above)h(code:)136 3644 y Fj(\017)46
b Fm(The)28 b(caller)h(must)f(take)f(car)n(e)i(of)f(opening)f(and)h
(closing)g(the)f(\256le)i(containing)f(the)f(MPEG)h(str)n(eam;)j(the)
227 3757 y(Library)23 b(assumes)f(that)g(it)h(is)f(passed)f(a)j(\256le)
e(r)n(eady)g(for)h(r)n(eading.)136 3932 y Fj(\017)46
b Fm(The)15 b Fl(ImageDesc)c Fm(str)o(uctur)n(e)j(contains)h(all)h(the)
f(information)g(that)g(should)f(be)h(needed)e(to)i(display)f(frames)227
4045 y(fr)n(om)k(the)e(MPEG)h(str)n(eam)g(\(although)g(not)f
(necessarily)g(all)j(the)d(information)i(you)e(could)h(possibly)f(want)
227 4157 y(to)22 b(know)g(about)g(an)i(MPEG)e(str)n(eam\).)136
4332 y Fj(\017)46 b Fl(SetMPEGOption\(\))13 b Fm(can)21
b(be)f(used)f(to)g(contr)n(ol)h(somewhat)f(the)g(decoding)f(of)i
(frames.)29 b(In)20 b(addition)g(to)227 4445 y(selecting)i(a)h
(dithering)e(mode,)g(you)h(can)h(also)f(select)g(the)g(luminance)h(and)
g(chr)n(ominance)g(ranges)f(used)227 4558 y(for)c(dithering.)27
b(Also,)18 b(note)f(that)g Fl(SetMPEGOption\(\))11 b
Fm(should)17 b(be)h(called)g Fi(befor)n(e)i Fl(OpenMPEG\(\))14
b Fm(when)227 4671 y(setting)21 b(the)h(dithering)g(method.)136
4845 y Fj(\017)46 b Fm(The)20 b(MPEG)g(data)h(can)g(be)g(decoded)d
(using)i(a)h(variety)f(of)h(dithering)e(methods.)27 b(\(Note)20
b(that)g(in)h(this)f(con-)227 4958 y(text,)j Fi(dithering)k
Fm(r)n(efers)c(to)h(converting)f(fr)n(om)i(the)e(luminance-chr)n
(omaticity)-10 b(,)27 b(or)c(YCrCb,)i(colour)f(space)227
5071 y(in)f(which)h(MPEG)e(data)h(is)g(encoded,)d(to)i(the)g(mor)n(e)g
(conventional)h(RGB)g(scheme.\))p 0 5139 1560 4 v 100
5193 a Fh(1)134 5225 y Fg(For)h(an)h(even)f(mor)o(e)f(r)o(ealistic)g
(\(but)i(of)e(course)h(considerably)f(lar)o(ger\))f(example,)i(take)g
(a)h(look)e(at)i Ff(glmpeg)p 3291 5225 23 4 v 26 w(play)p
Fg(.)40 b(This)24 b(is)f(the)0 5316 y(full-featur)o(ed)18
b(MPEG)h(player)f(that)j(was)f(the)g(impetus)f(for)f(cr)o(eating)h(the)
h(MPEG)f(Library;)f(it)i(is)f(available)h(by)f(anonymous)h(ftp)f(fr)o
(om)0 5407 y Ff(ftp.mni.mcgill.ca)p Fg(,)d(in)i Ff(/pub/mpeg)p
Fg(.)1927 5656 y Fm(2)p eop
%%Page: 3 3
3 2 bop 136 399 a Fj(\017)46 b Fm(Y)-8 b(ou)14 b(don't)g(need)g(to)h
(pass)f(any)h(parameters)f(to)h Fl(GetMPEGFrame\(\))8
b Fm(or)15 b Fl(CloseMPEG\(\))10 b Fm(to)15 b(tell)g(it)g(which)227
511 y(MPEG)20 b(str)n(eam)f(you)g(mean;)h(this)g(is)f(because)h(the)e
(Berkeley)g(decoding)g(engine)h(\(and)g(hence)g(the)g(MPEG)227
624 y(Library)27 b(itself\))f(depends)e(heavily)j(on)f(global)h
(variables,)i(and)d(unfortunately)f(cannot)i(decode)d(mor)n(e)227
737 y(than)f(one)f(MPEG)g(at)h(a)g(time.)141 913 y(Mor)n(e)f(detailed)g
(information)h(is)g(pr)n(ovided)f(in)h(sections)e(below)-8
b(.)0 1209 y Fn(3)119 b(Concepts)31 b(and)f(Data)e(Formats)0
1420 y Fm(This)22 b(section)g(deals)h(with)f(the)g(main)i(concepts)d
(needed)g(to)h(contr)n(ol)g(the)g(MPEG)h(Library)g(and)f(to)h(display)f
(the)0 1533 y(data)h(it)h(r)n(eturns.)30 b(It)23 b(does)e
Fi(not)j Fm(deal)f(with)g(the)g(details)g(of)g(how)g(MPEG)g(str)n(eams)
f(ar)n(e)i(encoded,)d(stor)n(ed,)h(or)h(de-)0 1646 y(coded.)0
1898 y Fe(3.1)99 b(Dithering)25 b(modes)0 2075 y Fm(A)i(lar)n(ge)g
(number)g(of)g(dithering)f(modes)g(\(in)i(fact,)h(all)f(the)e(modes)g
(pr)n(ovided)g(by)h(the)g(original)h Fl(mpeg)p 3626 2075
28 4 v 31 w(play)p Fm(\))0 2188 y(ar)n(e)19 b(available.)32
b(A)19 b(few)f(pr)n(oduce)g(nonsensical)h(r)n(esults,)f(but)h(all)h
(have)g(been)e(fully)h(tested)e(in)i(the)f(context)g(of)h(the)0
2301 y(MPEG)k(Library)f(and)h(found)f(to)g(agr)n(ee)g(with)h(the)e(r)n
(esults)h(given)g(by)h Fl(mpeg)p 2637 2301 V 31 w(play)p
Fm(.)141 2414 y(\252Dithering\272)29 b(in)f(this)g(context)f(is)h(the)f
(conversion)g(fr)n(om)i(luminance-chr)n(ominance)i(colour)d(space)f
(\(aka)0 2527 y(YCrCb,)33 b(YIQ,)d(or)g(YUV)-12 b(,)30
b(which)h(is)f(how)g(MPEG)h(str)n(eams)e(ar)n(e)i(encoded)e(and)h(is)h
(the)f(same)g(space)g(used)f(by)0 2640 y(NTSC)20 b(television)g
(signals\))h(to)f(some)f(form)i(of)f(RGB)h(space.)28
b(The)20 b(implementors)g(of)g Fl(mpeg)p 3214 2640 V
31 w(play)f Fm(found)g(that)0 2753 y(outright)24 b(conversion)h(to)g(r)
n(ed/gr)n(een/blue)f(values)i(takes)e(both)h(mor)n(e)g(time)h(and)g
(memory)e(than)i(any)f(other)0 2865 y(method)14 b(they)h(experimented)e
(with,)k(so)e(most)g(modes)f(ar)n(e)j(colour)e(mapped.)27
b(This)15 b(means)h(that)g Fl(OpenMPEG\(\))0 2978 y Fm(will)21
b(cr)n(eate)e(an)h(8-bit)h(colour)e(map)h(which)g(can)g(be)f(accessed)g
(by)g(the)g(user)f(via)j(the)e Fl(ColormapEntry)13 b
Fm(pointer)0 3091 y(in)j Fl(ImageDesc)p Fm(,)c(and)j(that)g(the)f
(pixel)h(values)h(r)n(eturned)d(by)i Fl(GetMPEGFrame\(\))9
b Fm(ar)n(e)15 b(indeces)f(into)h(this)g(colour)0 3204
y(map.)39 b(The)25 b(dithering)f(mode)h(af)n(fects)h(the)e(quality)i
(of)f(the)g(decoded)e(images,)j(the)f(number)g(of)g(bits)h(used)e(per)0
3317 y(pixel,)e(and)h(the)f(colour)g(depth)f(of)i(the)f(image.)141
3430 y(The)g(dithering)f(mode)h(is)g(selected)f(with)h
Fl(SetMPEGOption\(\))o Fm(,)17 b(using)k(the)h Fl(MPEG)p
3085 3430 V 31 w(DITHER)e Fm(option)h(and)0 3543 y(one)h(of)g(the)g
(following)h(values:)150 3719 y Fl(ORDERED)p 540 3719
V 30 w(DITHER:)320 b Fm(8-bit)18 b(colour)n(-mapped;)h(r)n(easonable)e
(quality;)i(decoding)d(is)i(almost)f(as)1270 3832 y(fast)22
b(as)h Fl(GRAY)p 1768 3832 V 31 w(DITHER)150 4014 y(ORDERED2)p
595 4014 V 29 w(DITHER:)266 b Fm(8-bit)23 b(colour)n(-mapped;)f(r)n
(easonable)h(quality)150 4197 y Fl(MBORDERED)p 650 4197
V 29 w(DITHER:)211 b Fm(8-bit)23 b(colour)n(-mapped;)f(r)n(easonable)h
(quality)150 4380 y Fl(FS4)p 320 4380 V 31 w(DITHER:)539
b Fm(8-bit)23 b(colour)n(-mapped;)f(colours)g(ar)n(e)h(all)i(wr)n(ong)
150 4563 y Fl(FS2)p 320 4563 V 31 w(DITHER:)539 b Fm(8-bit)23
b(colour)n(-mapped;)f(colours)g(ar)n(e)h(all)i(wr)n(ong)150
4746 y Fl(FS2FAST)p 540 4746 V 30 w(DITHER:)320 b Fm(8-bit)16
b(colour)f(mapped)f(using)h(Floyd-Steinber)n(g)e(err)n(or)h(dif)n
(fusion;)k(r)n(ea-)1270 4859 y(sonable)k(quality)150
5041 y Fl(HYBRID)p 485 5041 V 30 w(DITHER:)375 b Fm(8-bit)23
b(colour)n(-mapped;)f(passable)h(colour)150 5224 y Fl(HYBRID2)p
540 5224 V 30 w(DITHER:)320 b Fm(8-bit)23 b(colour)n(-mapped;)f
(slightly)h(worse)e(than)h Fl(HYBRID)p 3268 5224 V 30
w(DITHER)150 5407 y(Twox2)p 430 5407 V 30 w(DITHER:)430
b Fm(8-bit)23 b(colour)n(-mapped)g(with)f(pixels)g(doubled;)g(poor)f
(quality)1927 5656 y(3)p eop
%%Page: 4 4
4 3 bop 150 399 a Fl(GRAY)p 375 399 28 4 v 31 w(DITHER:)484
b Fm(a)31 b(256-shade)g(grayscale)g(r)n(endering;)i(nice)e(quality)g
(and)g(fastest)f(de-)1270 511 y(coding)150 699 y Fl(FULL)p
375 699 V 31 w(COLOR)p 681 699 V 30 w(DITHER:)179 b Fm(a)32
b(high-quality)g(24-bit)h(colour)f(r)n(endering;)i(r)n(esults)d(in)h
(slowest)e(de-)1270 812 y(coding)150 1000 y Fl(MONO)p
375 1000 V 31 w(DITHER:)484 b Fm(1-bit)16 b(monochr)n(ome)f(dithering;)
i(use)d(as)h(last)h(r)n(esort)e(for)h(1-bit)i(displays)150
1187 y Fl(THRESHOLD)p 650 1187 V 29 w(DITHER:)211 b Fm(??)0
1375 y(The)15 b(descriptions)e(her)n(e)i(ar)n(e)g(my)h(entir)n(ely)e
(subjective)i(judgments)d(of)i(the)g(image)h(quality)f(with)g(each)h
(dithering)0 1488 y(mode.)29 b(\252Reasonable\272)23
b(quality)g(is)g(better)e(than)i(\252passable.\272)31
b(Y)-8 b(our)21 b(mileage)i(may)g(vary)-10 b(.)141 1601
y(Note)23 b(that)h(the)g(dithering)g(mode)f(must)h(be)g(set)g
Fi(befor)n(e)j Fl(OpenMPEG\(\))20 b Fm(is)k(called.)37
b(For)23 b(example,)i(to)f(select)0 1714 y(gray-scale)f(dithering)e
(and)i(then)f(open)f(the)h(\256le)h Fl(example.mpg)18
b Fm(as)k(an)h(MPEG)g(str)n(eam:)273 1901 y Fl(char)380
b(filename[])50 b(=)k("example.mpg";)273 2014 y(FILE)380
b(*mpeg;)273 2127 y(ImageDesc)105 b(image;)273 2353 y(mpeg)52
b(=)j(fopen)d(\(filename,)e("r"\);)273 2466 y(SetMPEGOption)e
(\(MPEG_DITHER,)h(\(int\))j(GRAY_DITHER\);)273 2579 y(OpenMPEG)f
(\(&image\);)0 2833 y Fe(3.2)99 b(Colour)26 b(maps)0
3010 y Fm(Most)19 b(dithering)f(modes)h(r)n(esult)g(in)h(images)g
(whose)e(pixel)i(values)g(ar)n(e)g(indeces)f(to)g(an)h(8-bit)h(colour)f
(map.)29 b(This)0 3123 y(colour)e(map)g(is)g(accessed)f(via)i(the)e
Fl(ImageDesc)d Fm(str)o(uctur)n(e,)k(and)g(it)g(is)g(set)f(by)h
Fl(OpenMPEG\(\))22 b Fm(based)k(on)h(the)0 3236 y(dithering)d(type)f
(selected)g(by)h Fl(SetMPEGOption\(\))18 b Fm(\(this)25
b(is)g(why)f(the)g(dithering)f(type)g(must)h(be)h(set)e(befor)n(e)0
3349 y(calling)h Fl(OpenMPEG\(\))p Fm(\).)141 3462 y(The)c(colour)g
(map)h(is)f(accessed)g(via)h(the)f Fl(Colormap)d Fm(\256eld)j(of)g
Fl(ImageDesc)p Fm(,)d(which)k(points)e(to)h(an)g(array)h(of)0
3575 y Fl(ColormapSize)c Fm(colour)23 b(map)g(entries.)28
b(Each)23 b(colour)g(map)g(entry)e(is)i(a)g(str)o(uctur)n(e)f(of)g(the)
g(form)0 3763 y Fl(typedef)51 b(struct)0 3875 y({)164
3988 y(unsigned)g(char)h(red,)h(green,)f(blue;)0 4101
y(})i(ColormapEntry;)0 4289 y Fm(and)27 b(the)f(colour)h(map)g(is)g(cr)
n(eated)g(when)f Fl(OpenMPEG\(\))c Fm(is)27 b(called.)44
b(If)27 b(no)g(colour)g(map)g(is)g(cr)n(eated)f(\(i.e.,)i(the)0
4402 y(dithering)e(mode)h(is)g Fl(FULL)p 975 4402 V 31
w(COLOR)p 1281 4402 V 30 w(DITHER)p Fm(\),)e(then)h Fl(ColormapSize)c
Fm(will)29 b(be)e(0)h(and)f Fl(Colormap)d Fm(will)k(be)0
4515 y Fl(NULL)p Fm(.)21 b(For)g(example:)164 4702 y
Fl(char)325 b(*filename;)164 4815 y(FILE)g(*MPEG;)164
4928 y(ImageDesc)50 b(MPEGInfo;)164 5154 y(filename)h(=)j(argv[1];)164
5380 y(/*)f(Prepare)f(to)h(read)g(and)g(decode)f(an)i(MPEG)e(stream)g
(*/)1927 5656 y Fm(4)p eop
%%Page: 5 5
5 4 bop 164 511 a Fl(MPEG)52 b(=)i(fopen)f(\(filename,)d("rb"\);)164
624 y(if)j(\(!OpenMPEG)d(\(MPEG,)i(&MPEGInfo\)\))327
737 y(exit;)164 963 y(/*)h(Do)h(we)g(have)e(a)i(colour-mapped)49
b(mode?)j(*/)164 1189 y(if)h(\(MPEGInfo.Color)o(map)48
b(!=)53 b(NULL\))164 1302 y({)327 1415 y(for)g(\(i)h(=)g(0;)g(i)g(<)g
(MPEGInfo.Colorm)o(ap)o(Si)o(ze)o(;)49 b(i++\))327 1528
y({)491 1641 y(mapcolor)i(\(i,)i(MPEGInfo.Colorm)o(ap)o([i)o(].)o(red)o
(,)1200 1753 y(MPEGInfo.Colorm)o(ap)o([i)o(].)o(gre)o(en)o(,)1200
1866 y(MPEGInfo.Colorm)o(ap)o([i)o(].)o(blu)o(e\))o(;)327
1979 y(})164 2092 y(})164 2205 y(/*)g(...)g(*/)0 2393
y Fm(Her)n(e,)21 b(we)i(assume)e(that)i(the)f(function)g
Fl(mapcolor\(\))d Fm(is)j(available)k(to)c(set)f(the)h(system)f(colour)
i(map.)0 2647 y Fe(3.3)99 b(Image)24 b(data)h(format)0
2824 y Fm(The)f(image)h(data,)g(as)g(r)n(eturned)e(by)h
Fl(GetMPEGFrame\(\))p Fm(,)19 b(is)25 b(formatted)e(in)i(a)h
(straightforwar)n(d)d(way)-10 b(.)36 b(Pixels)0 2937
y(ar)n(e)30 b(stor)n(ed)d(in)j(r)n(ow-major)g(or)n(der)-7
b(,)30 b(starting)f(at)g(the)g(upper)f(left-hand)h(corner)g(of)h(the)e
(image.)51 b(The)28 b(number)0 3050 y(of)g(bits)g(allocated)h(per)e
(pixel)h(is)g(given)g(by)g(the)f Fl(PixelSize)d Fm(\256eld)k(of)g
Fl(ImageDesc)p Fm(.)42 b(This)28 b(is)g(illustrated)g(in)0
3163 y(Figur)n(e)f(1,)h(which)g(shows)e(a)i(sample)f
Fd(8)g Fj(\002)f Fd(10)p Fm(-pixel)i(image,)h(with)e(the)f(of)n(fset)h
(into)g(the)g(image)g(data)h(for)f(each)0 3276 y(pixel.)j(If)23
b(the)e(pixels)i(ar)n(e)g(8)g(bits)g(each,)f(then)g(this)g(will)i(be)f
(a)g(simple)g(byte)e(of)n(fset.)1200 3401 y
 11840716 9472573 0 0 11840716 9472573 startTexFig
 1200 3401
a
%%BeginDocument: image_format.eps
/$F2psDict 32 dict def 
$F2psDict begin
	$F2psDict /mtrx matrix put

	end
	/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
	/$F2psEnd {$F2psEnteredState restore end} def
	%%EndProlog

$F2psBegin
1 setlinecap 1 setlinejoin
-162 108 translate
0.000000 144.000000 translate 0.900 -0.900 scale
1.000 setlinewidth
% Polyline
newpath 219 119 moveto 219 279 lineto  stroke
% Polyline
newpath 259 119 moveto 259 279 lineto  stroke
% Polyline
newpath 279 119 moveto 279 279 lineto  stroke
% Polyline
newpath 339 119 moveto 339 279 lineto  stroke
% Polyline
newpath 359 119 moveto 359 279 lineto  stroke
% Polyline
newpath 379 119 moveto 379 279 lineto  stroke
% Polyline
newpath 239 119 moveto 239 279 lineto  stroke
% Polyline
newpath 299 119 moveto 299 279 lineto  stroke
% Polyline
newpath 319 119 moveto 319 279 lineto  stroke
% Polyline
newpath 179 139 moveto 379 139 lineto  stroke
% Polyline
newpath 179 159 moveto 379 159 lineto  stroke
% Polyline
newpath 179 179 moveto 379 179 lineto  stroke
% Polyline
newpath 179 199 moveto 379 199 lineto  stroke
% Polyline
newpath 179 219 moveto 379 219 lineto  stroke
% Polyline
newpath 179 239 moveto 379 239 lineto  stroke
% Polyline
newpath 179 259 moveto 379 259 lineto  stroke
% Polyline
newpath 179 279 moveto 379 279 lineto  stroke
% Polyline
newpath 179 119 moveto 379 119 lineto  stroke
% Polyline
newpath 199 119 moveto 199 279 lineto  stroke
% Polyline
newpath 179 119 moveto 179 279 lineto  stroke
/Courier findfont 12.000 scalefont setfont
364 274 moveto 
1 -1 scale
(79) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
269 134 moveto 
1 -1 scale
(4) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
289 134 moveto 
1 -1 scale
(5) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
309 134 moveto 
1 -1 scale
(6) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
329 134 moveto 
1 -1 scale
(7) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
349 134 moveto 
1 -1 scale
(8) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
189 134 moveto 
1 -1 scale
(0) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
249 134 moveto 
1 -1 scale
(3) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
209 134 moveto 
1 -1 scale
(1) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
229 134 moveto 
1 -1 scale
(2) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
369 134 moveto 
1 -1 scale
(9) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
184 154 moveto 
1 -1 scale
(10) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
184 174 moveto 
1 -1 scale
(20) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
184 194 moveto 
1 -1 scale
(30) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
184 214 moveto 
1 -1 scale
(40) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
184 234 moveto 
1 -1 scale
(50) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
184 254 moveto 
1 -1 scale
(60) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
184 274 moveto 
1 -1 scale
(70) gsave  0.000 rotate show grestore 1 -1 scale
$F2psEnd
%%EndDocument

 endTexFig
 0 4797 a Fm(Figur)n(e)h(1:)31 b(Illustration)23 b(of)g(image)g(data)h
(layout)e(for)h(a)h(sample)f Fd(8)e Fj(\002)f Fd(10)k
Fm(image.)31 b(The)23 b(number)f(at)i(each)f(pixel)g(is)0
4910 y(just)f(the)g(of)n(fset)g(into)g(the)g(image)h(data)g(array)-10
b(.)1927 5656 y(5)p eop
%%Page: 6 6
6 5 bop 0 399 a Fn(4)119 b(Programming)31 b(Reference)0
613 y Fe(4.1)99 b(The)25 b Fc(ImageDesc)e Fe(structure)0
790 y Fm(Relevant)f(declarations:)0 977 y Fl(typedef)51
b(struct)0 1090 y({)164 1203 y(unsigned)g(char)h(red,)h(green,)f(blue;)
0 1316 y(})i(ColormapEntry;)0 1542 y(typedef)d(struct)0
1655 y({)164 1768 y(int)107 b(Height;)706 b(/*)54 b(in)g(pixels)d(*/)
164 1881 y(int)107 b(Width;)164 1993 y(int)g(Depth;)761
b(/*)54 b(image)e(depth)g(\(bits\))g(*/)164 2106 y(int)107
b(PixelSize;)541 b(/*)54 b(bits)f(actually)e(stored)g(per)j(pixel)e(*/)
164 2219 y(int)107 b(Size;)816 b(/*)54 b(bytes)e(for)h(whole)g(image)f
(*/)164 2332 y(int)107 b(BitmapPad;)541 b(/*)54 b("quantum")c(of)k(a)g
(scanline)d(--)j(*/)1527 2445 y(/*)g(each)f(scanline)e(starts)g(on)j
(an)g(even)e(*/)1527 2558 y(/*)i(interval)d(of)i(this)g(many)g(bits)g
(*/)164 2671 y(int)107 b(ColormapSize;)164 2784 y(ColormapEntry)48
b(*Colormap;)i(/*)k(an)g(array)e(of)h(ColormapSize)d(entries)h(*/)0
2897 y(})j(ImageDesc;)141 3084 y Fm(This)22 b(str)o(uctur)n(e)e(pr)n
(ovides)h(\(hopefully\))h(all)h(the)e(information)h(needed)e(to)h
(display)g(an)i(MPEG)e(str)n(eam,)h(al-)0 3197 y(though)h(it)h(doesn't)
e(necessarily)h(pr)n(ovide)h(all)i(the)d(information)h(you)g(could)g
(possibly)f(want)h(to)f(know)g(about)0 3310 y(such)e(a)i(str)n(eam.)29
b(However)-7 b(,)20 b(that's)i(not)e(the)h(intent)g(of)h(the)f(MPEG)g
(Library;)h(if)g(you)f(r)n(eally)i(need)d(to)h(know)-8
b(,)20 b(for)0 3423 y(instance,)25 b(just)f(how)h(many)g(intra-frames)h
(ar)n(e)f(in)g(a)h(particular)g(MPEG,)e(you)g(might)h(want)g(to)f(take)
g(a)i(look)e(at)0 3536 y(the)e Fl(mpegstat)d Fm(pr)n(ogram,)j(which)h
(was)g(also)g(based)f(on)g(the)g(Berkeley)e(X1)-5 b(1)23
b(player)-7 b(.)2985 3503 y Fk(2)141 3649 y Fm(Her)n(e)22
b(is)h(the)e(list)i(of)g(\256elds)f(in)h(the)f(str)o(uctur)n(e:)150
3837 y Fl(Height:)320 b Fm(the)22 b(height,)f(in)j(pixels,)e(of)g(the)g
(movie.)150 4024 y Fl(Width:)375 b Fm(the)27 b(width,)i(in)f(pixels,)h
(of)f(the)f(movie.)46 b(Note)27 b(that)h(due)f(to)g(the)g(block)h
(natur)n(e)g(of)855 4137 y(MPEG)23 b(encoding,)e(the)h(height)g(and)g
(width)g(will)i(always)f(be)g(multiples)f(of)h(16.)150
4325 y Fl(Depth:)375 b Fm(the)23 b(number)g(of)h(bits)f(per)g(pixel)g
(that)g(ar)n(e)h(actually)h(r)n(elevant)f(to)e(the)h(display)-10
b(.)32 b(For)855 4438 y(most)18 b(dithering)g(methods,)g(this)g(will)j
(be)d(8)i(\(i.e.,)f(we)g(usually)g(use)f(an)h(8-bit)h(colour)855
4551 y(map\);)j(for)g(full-colour)h(dithering,)d(it)i(will)h(be)e(24.)
150 4738 y Fl(PixelSize:)155 b Fm(the)22 b(number)g(of)h(bits)g(\(not)f
(bytes!\))29 b(of)23 b(storage)e(allocated)i(per)f(pixel.)150
4926 y Fl(Size:)430 b Fm(the)29 b(size,)i(in)e(bytes,)h(of)f(one)f
(entir)n(e)h(unencoded)e(frame.)51 b(This)29 b(is)g(simply)h(equal)855
5039 y(to)c Fl(Height*Width*Pi)o(xe)o(lS)o(ize)o(/8)o
Fm(.)36 b(\(Note:)h(curr)n(ently)-10 b(,)26 b Fl(BitmapPad)d
Fm(is)k(ig-)855 5152 y(nor)n(ed)22 b(in)h(the)f(calculation)i(of)f
Fl(Size)p Fm(.\))p 0 5233 1560 4 v 100 5286 a Fh(2)134
5318 y Ff(mpegstat)18 b Fg(should)g(also)g(be)h(available)g(by)g
(anonymous)g(ftp)g(fr)o(om)e Ff(ftp.mni.mcgill.ca:/pub/mpeg)p
Fg(.)1927 5656 y Fm(6)p eop
%%Page: 7 7
7 6 bop 150 399 a Fl(BitmapPad:)155 b Fm(the)18 b(\252quantum\272)i(of)
e(a)i(scan)f(line;)h(i.e.,)f(each)g(scan)g(line)g(starts)f(on)g(an)h
(even)f(interval)855 511 y(of)23 b(this)f(many)h(bits.)150
698 y Fl(ColormapSize:)-10 b Fm(the)19 b(number)h(of)g(entries)f(in)i
(the)e(colour)h(map.)29 b(This)20 b(is)g(usually)g(128,)i(but)e(for)g
(most)855 811 y(dithering)d(methods)e(it)j(can)h(be)e(indir)n(ectly)h
(modi\256ed)e(by)i(the)f(user)f(of)i(the)e(Library)-10
b(.)855 924 y(It)22 b(is)h(zer)n(o)g(in)g(non-colourmapped)e(modes.)150
1110 y Fl(Colormap:)210 b Fm(the)25 b(table)g(used)f(to)h(map)g(pixel)g
(values)h(to)f(r)n(ed/gr)n(een/blue)e(values)j(\(which)g(ar)n(e)855
1223 y(themselves)d(stor)n(ed)g(as)h(bytes)g(in)h(the)e
Fl(ColormapEntry)c Fm(str)o(uctur)n(e.)34 b(It)24 b(is)h
Fl(NULL)855 1336 y Fm(in)e(non-colourmapped)f(modes.)0
1590 y Fe(4.2)99 b Fc(SetMPEGOption\(\))0 1767 y Fb(Function)21
b(prototype:)141 1904 y Fl(void)53 b(SetMPEGOption)48
b(\(MPEGOptionEnum)g(Option,)k(int)h(Value\))0 2065 y(Option)20
b Fm(should)i(be)g(one)g(of:)150 2249 y Fl(MPEG)p 375
2249 28 4 v 31 w(DITHER:)378 b Fm(Sets)28 b(the)h(dithering)f(mode,)i
(which)g(contr)n(ols)f(how)g(YCrCb)h(values)g(ar)n(e)1164
2362 y(converted)19 b(to)h(RGB)g(space.)29 b Fl(Value)18
b Fm(should)h(be)i(a)g Fl(DitherEnum)16 b Fm(value,)1164
2475 y(cast)22 b(to)g Fl(int)p Fm(.)29 b(Dithering)22
b(modes)f(ar)n(e)h(explained)g(above,)g(in)h(section)f(3.1.)150
2661 y Fl(MPEG)p 375 2661 V 31 w(LUM)p 571 2661 V 31
w(RANGE:)150 2848 y(MPEG)p 375 2848 V 31 w(CR)p 516 2848
V 32 w(RANGE:)150 3034 y(MPEG)p 375 3034 V 31 w(CB)p
516 3034 V 32 w(RANGE:)291 b Fm(These)24 b(set)h(the)g(ranges)g(of)h
(luminance)i(and)e(chr)n(omaticity)h(values.)40 b(The)1164
3147 y(defaults)20 b(ar)n(e)i(8,)f(4,)h(and)f(4.)30 b(\(I)21
b(do)f(not)h(understand)e(the)h(ef)n(fects)h(of)g(chang-)1164
3260 y(ing)c(these;)f(my)h(experiments)d(indicate)j(that)f(doing)g(so)g
(garbles)g(perfectly)1164 3373 y(good)21 b(colour)i(maps.\))0
3557 y Fb(Notes:)141 3694 y Fl(SetMPEGOption\(\))12 b
Fm(allows)20 b(you)e(to)g(set)g(a)h(variety)g(of)g(options)f(r)n
(elated)g(to)h(MPEG)f(decoding.)28 b(The)18 b(pos-)0
3807 y(sible)26 b(values)f(for)g Fl(Option)e Fm(ar)n(e)i(described)f
(above;)j(the)e(possible)f(values)h(for)h Fl(Value)d
Fm(value)j(ar)n(e)f(dependent)0 3920 y(on)d(what)h Fl(Option)d
Fm(you)i(ar)n(e)h(setting.)28 b(Whatever)22 b Fl(Value)e
Fm(is,)j(it)g(should)e(of)i(course)e(be)i(cast)g(to)f(an)h
Fl(int)p Fm(.)0 4223 y Fe(4.3)99 b Fc(OpenMPEG\(\))0
4399 y Fb(Function)21 b(prototype:)141 4537 y Fl(Boolean)52
b(OpenMPEG)e(\(FILE)j(*MPEGfile,)d(ImageDesc)g(*Image\))0
4698 y Fb(Arguments:)150 4882 y Fl(MPEGfile:)10 b Fm(A)17
b(\256le)h(that)f(is)h(alr)n(eady)g(open)e(for)i(r)n(eading,)g
(positioned)e(at)h(the)g(beginning)h(of)f(an)h(MPEG)655
4995 y(str)n(eam.)150 5181 y Fl(Image:)175 b Fm(Pointer)18
b(to)g(a)h(user)n(-declar)n(ed)g Fl(ImageDesc)c Fm(str)o(uctur)n(e.)27
b(Y)-8 b(ou)18 b(shouldn't)f(change)i(any)g(of)655 5294
y(the)k(\256elds)g(in)h Fl(*Image)d Fm(yourself,)i(either)g(befor)n(e)g
(or)g(after)h(calling)h Fl(OpenMPEG\(\))p Fm(;)20 b(use)655
5407 y Fl(SetMPEGOption\()o(\))d Fm(instead.)1927 5656
y(7)p eop
%%Page: 8 8
8 7 bop 0 399 a Fb(Notes:)141 530 y Fl(OpenMPEG\(\))17
b Fm(pr)n(epar)n(es)j(an)h(MPEG)g(str)n(eam)g(for)g(decoding.)28
b(It)21 b(initializes)i(internal)e(data)h(str)o(uctur)n(es)d(for)0
643 y(decoding)g(and)i(dithering)f(and\320if)h(applicable\320cr)n
(eates)h(a)f(colour)g(map.)29 b(After)20 b(calling)j
Fl(OpenMPEG\(\))p Fm(,)16 b(the)0 755 y(following)24
b(\256elds)f(in)h Fl(*Image)d Fm(will)j(be)g(set:)30
b Fl(Height)p Fm(,)21 b Fl(Width)p Fm(,)h Fl(Depth)p
Fm(,)f Fl(PixelSize)p Fm(,)f Fl(Size)p Fm(,)h Fl(BitmapPad)p
Fm(,)0 868 y Fl(ColormapSize)p Fm(,)c(and)23 b Fl(Colormap)p
Fm(.)0 1153 y Fe(4.4)99 b Fc(GetMPEGFrame\(\))0 1330
y Fb(Function)21 b(prototype:)141 1461 y Fl(Boolean)52
b(GetMPEGFrame)d(\(char)j(*Frame\))0 1610 y Fb(Arguments:)150
1765 y Fl(Frame:)75 b Fm(Pointer)28 b(to)g(a)i(user)n(-allocated)e
(chunk)h(of)g(memory)-10 b(.)47 b(Must)28 b(have)h(enough)f(r)n(oom)g
(for)h(the)555 1878 y(decoded)21 b(image,)h(which)i(can)f(be)g
(determined)d(fr)n(om)j(the)f Fl(Size)f Fm(\256eld)h(of)h
Fl(ImageDesc)p Fm(.)0 2069 y Fb(Notes:)141 2200 y Fm(Decodes)j(the)g
(next)g(frame)i(fr)n(om)f(the)f(movie.)44 b(Returns)25
b Fl(TRUE)g Fm(if)j(ther)n(e)e(ar)n(e)h(any)g(frames)g(left)g(to)g
(decode)0 2313 y(in)h(the)f(movie,)h(or)f Fl(FALSE)f
Fm(if)i(the)e(decoded)g(frame)i(is)f(the)g(last)g(frame)h(in)g(the)f
(movie.)45 b(That)27 b(is,)h(for)g(a)g(movie)0 2426 y(with)e
Fa(N)36 b Fm(frames)26 b Fl(GetMPEGFrame\(\))19 b Fm(will)27
b(r)n(eturn)e Fl(TRUE)f Fa(N)35 b Fj(\000)24 b Fd(1)i
Fm(times,)g(and)g(then)f(the)g(call)j(to)d(decode)f(the)0
2538 y(last)e(frame)h(will)g(r)n(eturn)f Fl(FALSE)p Fm(.)d(After)i
(that,)h(the)f(behaviour)i(of)f Fl(GetMPEGFrame\(\))16
b Fm(is)22 b(unde\256ned)e(\(unless)0 2651 y(you)i(call)i
Fl(RewindMPEG\(\))p Fm(.\))0 2936 y Fe(4.5)99 b Fc(RewindMPEG\(\))0
3113 y Fb(Function)21 b(prototype:)141 3244 y Fl(void)53
b(RewindMPEG)d(\(FILE)i(*MPEGfile,)e(ImageDesc)h(*Image\))0
3393 y Fb(Arguments:)150 3548 y Fl(MPEGfile:)10 b Fm(The)22
b(open,)f(r)n(eadable)i(str)n(eam)g(pointer)e(that)h(was)h(also)g
(passed)e(to)h Fl(OpenMPEG\(\))p Fm(.)150 3722 y Fl(Image:)175
b Fm(The)22 b(image)h(descriptor)e(that)h(was)h(passed)e(to)h(and)g
(\256lled)h(in)g(by)g Fl(OpenMPEG\(\))p Fm(.)0 3913 y
Fb(Notes:)141 4044 y Fm(Repositions)h Fl(MPEGfile)p Fm('s)f(\256le-of)n
(fset)j(pointer)g(to)g(point)g(to)f(the)h(beginning)g(of)h(the)f(str)n
(eam,)h(and)f(r)n(eini-)0 4157 y(tializes)33 b(internal)g(MPEG)f
(Library)g(str)o(uctur)n(es)e(to)i(pr)n(epar)n(e)f(r)n(eading)h(the)f
(MPEG)h(again.)59 b(The)32 b(\256rst)f(call)j(to)0 4270
y Fl(GetMPEGFrame\(\))13 b Fm(after)18 b(calling)j Fl(RewindMPEG\(\))13
b Fm(will)21 b(r)n(eturn)d(the)g(\256rst)g(frame)h(of)g(the)f(movie,)i
(as)f(though)0 4383 y Fl(OpenMPEG\(\))f Fm(had)23 b(just)f(been)g
(called.)0 4711 y Fn(References)0 4922 y Fm([1])46 b(Didier)29
b(LeGall,)i(\252MPEG\261A)e(V)-5 b(ideo)28 b(Compr)n(ession)g(Standar)n
(d)g(for)g(Multimedia)i(Applications,\272)g Fi(Com-)151
5035 y(munications)23 b(of)h(the)g(ACM)p Fm(,)d(April)i(1991,)h(V)-10
b(ol)23 b(34)g(Num)g(4,)g(pp.)e(46\26158.)0 5209 y([2])46
b(Ketan)25 b(Patel,)f(Brian)h(C.)g(Smith,)g(and)f(Lawr)n(ence)g(A.)g
(Rowe,)g(\252Performace)g(of)h(a)g(Softwar)n(e)f(MPEG)g(V)-5
b(ideo)151 5322 y(Decoder)7 b(\272,)22 b Fi(ACM)g(Multimedia)i('93)g
(Confer)n(ence)p Fm(.)1927 5656 y(8)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
